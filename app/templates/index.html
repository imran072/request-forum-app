{% extends "default.html" %}

{% block title %}Home Page{% endblock %}

{% block content %}

{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
            <div class="alert alert-{{ category }}">{{ message }}</div>
        {% endfor %}
    {% endif %}
{% endwith %}

<section class="search" style="background-image: url('{{ url_for('static', filename='img/background.jpg') }}'); background-size: cover; background-position: center;">
    <form method="get" action="{{ url_for('main.search_results') }}">
        <div class="form-row">
            <select name="make" id="make">
                <option value="any" {% if request.args.get('make') == 'any' %}selected{% endif %}>All Brands</option>
                {% for brand in brands %}
                    <option value="{{ brand.id }}" {% if request.args.get('make') == brand.id %}selected{% endif %}>{{ brand.name }}</option>
                {% endfor %}
            </select>
            <select name="model" id="model">
                <option value="any" {% if request.args.get('model') == 'any' %}selected{% endif %}>All Models</option>
                {% for model in models %}
                    <option value="{{ model.id }}" {% if request.args.get('model') == model.id %}selected{% endif %}>{{ model.name }}</option>
                {% endfor %}
            </select>
            <select name="price" id="price">
                <option value="any" {% if request.args.get('price') == 'any' %}selected{% endif %}>Max Price</option>
                {% for price in prices %}
                    <option value="{{ price }}" {% if request.args.get('price') == price %}selected{% endif %}>${{ price }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-row">
            <button type="submit">Find My EV</button>
        </div>
    </form>
</section>



<!-- ev ads -->
<section class="ev-ads-slider">
    <div class="slide">
        {% for vehicle in vehicles %}
        <div class="ad">
            <img src="{{ vehicle.image_url }}" alt="{{ vehicle.model }}">

            <div class="info">
                <h3>{{ vehicle.brand.name }} {{ vehicle.model_rel.name }} - {{ vehicle.year }}</h3>
                <p>Battery Capacity (kWh): {{ vehicle.battery_capacity }}</p>
                <p>Mileage (km): {{ vehicle.mileage }}</p>
                <p>Price: ${{ vehicle.price }}</p>
            </div>
        </div>
        {% endfor %}
    </div>
</section>

<div class="brand-slider">
    <div class="slide">
        <img src="../static/img/brand_logos/Tesla.png" alt="Tesla">
        <img src="../static/img/brand_logos/Honda.png" alt="Honda">
        <img src="../static/img/brand_logos/Fisker.png" alt="Fisker">
        <img src="../static/img/brand_logos/Ford.png" alt="Ford">
        <img src="../static/img/brand_logos/Audi.png" alt="Audi">
        <img src="../static/img/brand_logos/Renault.png" alt="Renault">
        <img src="../static/img/brand_logos/Toyota.png" alt="Toyota">
        <img src="../static/img/brand_logos/Volvo.png" alt="Volvo">
        <img src="../static/img/brand_logos/Maserati.png" alt="Maserati">
        <img src="../static/img/brand_logos/Nissan.png" alt="Nissan">
        <img src="../static/img/brand_logos/Mahindra.png" alt="Mahindra">
        <img src="../static/img/brand_logos/Kia.png" alt="Kia">
        <img src="../static/img/brand_logos/Jaguar.png" alt="Jaguar">
        <img src="../static/img/brand_logos/Hyundai.png" alt="Hyundai">
        <img src="../static/img/brand_logos/BYD.png" alt="BYD">
        <img src="../static/img/brand_logos/Volkswagen.png" alt="Volkswagen">
        <img src="../static/img/brand_logos/Bentley.png" alt="Bentley">
        <img src="../static/img/brand_logos/BMW.png" alt="BMW">
    </div>
</div>
{% endblock %}
